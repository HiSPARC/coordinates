\tikzsetnextfilename{externalized-enu_compass}

\pgfmathsetmacro{\scale}{.2}
\pgfmathsetmacro{\dw}{.5*\scale}
\pgfmathsetmacro{\dh}{1*\scale}

\begin{tikzpicture}[scale=2,thick]

    % coordinates
    \coordinate (O) at (0,0);

    % Draw ENU axes
    \draw[enu,-stealth] (O) -- (0,2) node[anchor=south] {North};
    \draw[enu,-stealth] (O) -- (2,0) node[anchor=west] {East};

    % Draw GPS
    \fill[base] (O) circle[radius=.05] node[anchor=north east] {\gps};

    % Draw a detectors
    \foreach \num / \col / \alphavec / \rlen / \betavec in {0/black/315/8.97/135,
                                                            1/red/315/3.15/135,
                                                            2/green/225/5.09/45,
                                                            3/blue/45/4.89/45} {
        \coordinate (d\num) at (90-\alphavec:\rlen*\scale);
        \fill[color=\col,rotate=90-\betavec] (d\num) ++(-\dh/2,-\dw/2) rectangle +(\dh,\dw);
    }
%    \fill[base,rotate=\betavec] (d0) ++(-\dh/2,-\dw/2) rectangle +(\dh,\dw);

    % Draw distance line
    \draw[compass,-stealth] (O) -- node[below right] {$r$} (d3);

    % Draw alpha line
    \draw[compass,-stealth] (0,.5) arc (90:90-45:.5);
    \draw[compass] (70:.6) node {$\alpha$};

    % Draw North from detector
    \draw[-stealth] (d0) -- +(0,.5) node[anchor=south] {N};
    % Draw detector angle
    \draw[-stealth] (d0) -- +(90-135:.5);

    % Draw beta line
    \draw[compass,-stealth] (d0) ++(0,.3) arc (90:90-135:.3);
    \draw[compass] (d0) ++(90-60:.33) node[anchor=south] {$\beta$};

\end{tikzpicture}
